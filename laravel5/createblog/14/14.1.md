# 审核模块

# 需求分析

我们需要对一个文章进行审核，如果这个文章不符合互联网规定，比如包含黄色，或者政治敏感内容，后台运营人员就有权力将这个文章下线。

最简单的方法是直接将这个文章从数据表中删除，但是实际上，这个并不是一个很好的方法，因为一旦使用物理删除，我们删除错误了，就没有办法进行恢复了。

我们这里使用的是增加一个deleted_at的字段来进行软删除。所谓软删除就是删除文章，就将一个标记位deleted_at设置为有值，一旦这个值被标记为删除时间，就代表这个文章被删除了。

# laravel的软删除

其实软删除是很通用的一个需求，在真实业务中，一些重要的表最好都需要使用软删除的操作。比如我们这里的文章表。

laravel自带了软删除的机制。在数据库迁移中，我们只需要使用softDeletes()就可以为这个数据表增加一个deleted_at字段用于软删除。

在模型中，我们直接使用 use SoftDeletes 就能将一个模型设置为软删除了。具体使用的时候我们直接使用delete操作就能实现软删除操作了。

使用withTrashed能获取已经被软删除的对象

## 具体的文章软删除机制操作

* 数据库迁移修改
* 文章模型修改

# 页面

页面就一个

* 文章列表页面

# 逻辑

逻辑有两个：
* 文章列表页面
* 文章软删除操作

我们再看下前台，一旦我们删除了对应的页面，就不会展示被软删除的文章了，前台一点都不需要进行修改!!! 这个就是使用laravel的方便之处。
